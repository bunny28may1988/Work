PipelineReleaseID,ReleasePipelineName,ReleaseDate,ProjectName,Summary,ChangeTicket,RowsUpdated,SQLStatement
3012,Finacle-Datapatch,2024-10-01,Finacle-Datapatch,Some Static Content!!!,[CHG0095653],Not Applicable,SQL> CREATE OR REPLACE 2 PROCEDURE TBS_DL_INFRA_270924 3 IS 4 V_EXPECTED_RECORDS_TO_FIX_COUNT NUBER; 5 V_ACTUAL_RECORDS_TO_FIX_COUNT NUBER; 6 I NUBER := 0; 7 V_SELECT_COUNT NUBER; 8 S NUBER := 0; 9 V_SELECT_COUNT_POST_COIT NUBER; 10 U NUBER := 0; 11 P NUBER := 0; 12 Q NUBER := 0; 13 W NUBER := 0; 14 X NUBER := 0; 15 BEGIN 16 V_EXPECTED_RECORDS_TO_FIX_COUNT := 168; 17 DBS_OUTPUT.PUT_LINE('No Of Records That Should Be Affected = ' || V_EXPECTED_RECORDS_TO_FIX_COUNT); 18 19 20 EXECUTE IEDIATE 'CREATE TABLE TBS_DL_INFRA_270924_PRE1 AS (SELECT C.*, ROWID ROW_ID FRO custom.c_fdst C where system_id in (''TBS'') and BATCH_TRAN_ID in ( 21 ''1537767678'', 22 ''1537892824'', 23 ''1537884082'', 24 ''1537767616'', 25 ''1537698697'', 26 ''1537780815'', 27 ''1537884053'', 28 ''1537871574'', 29 ''1537867085'', 30 ''1537737082'', 31 ''1537853986'', 32 ''1537867129'', 33 ''1537698726'', 34 ''1537853229'', 35 ''1537892791'', 36 ''1537853259'', 37 ''1537737187'', 38 ''1537780846'', 39 ''1537853959'', 40 ''1537871605'', 41 ''1537674427'', 42 ''1537674407'', 43 ''1537630760'', 44 ''1537630790'', 45 ''1537613509'', 46 ''1537613540'', 47 ''1535277457'', 48 ''1535043576'', 49 ''1534021404'', 50 ''1535308964'', 51 ''1535247595'', 52 ''1535021222'', 53 ''1535442804'', 54 ''1535467976'', 55 ''1535855763'', 56 ''1533835923'', 57 ''1534972136'', 58 ''1535278904'', 59 ''1535879834'', 60 ''1535566822'', 61 ''1536122584'', 62 ''1536758811'', 63 ''1536122592'', 64 ''1537315761'', 65 ''1537053134'', 66 ''1537143954'', 67 ''1537126583'', 68 ''1536948264'', 69 ''1536956356'', 70 ''1537593062'', 71 ''1536989204'', 72 ''1537046181'', 73 ''1536950204'', 74 ''1536908797'', 75 ''1536873144'', 76 ''1536859397'') and tran_PROCESS_STATUS is null)'; 77 78 79 EXECUTE IEDIATE 'CREATE TABLE TBS_DL_INFRA_270924_PRE2 AS (SELECT D.*, ROWID ROW_ID FRO custom.c_fhst D where system_id=''TBS'' and BATCH_TRAN_ID in ( 80 ''1537767678'', 81 ''1537892824'', 82 ''1537884082'', 83 ''1537767616'', 84 ''1537698697'', 85 ''1537780815'', 86 ''1537884053'', 87 ''1537871574'', 88 ''1537867085'', 89 ''1537737082'', 90 ''1537853986'', 91 ''1537867129'', 92 ''1537698726'', 93 ''1537853229'', 94 ''1537892791'', 95 ''1537853259'', 96 ''1537737187'', 97 ''1537780846'', 98 ''1537853959'', 99 ''1537871605'', 100 ''1537674427'', 101 ''1537674407'', 102 ''1537630760'', 103 ''1537630790'', 104 ''1537613509'', 105 ''1537613540'', 106 ''1535277457'', 107 ''1535043576'', 108 ''1534021404'', 109 ''1535308964'', 110 ''1535247595'', 111 ''1535021222'', 112 ''1535442804'', 113 ''1535467976'', 114 ''1535855763'', 115 ''1533835923'', 116 ''1534972136'', 117 ''1535278904'', 118 ''1535879834'', 119 ''1535566822'', 120 ''1536122584'', 121 ''1536758811'', 122 ''1536122592'', 123 ''1537315761'', 124 ''1537053134'', 125 ''1537143954'', 126 ''1537126583'', 127 ''1536948264'', 128 ''1536956356'', 129 ''1537593062'', 130 ''1536989204'', 131 ''1537046181'', 132 ''1536950204'', 133 ''1536908797'', 134 ''1536873144'', 135 ''1536859397'') and PROCESS_STATUS=''N'')'; 136 137 138 EXECUTE IEDIATE 'SELECT COUNT(1) FRO TBS_DL_INFRA_270924_PRE1' INTO P ; 139 EXECUTE IEDIATE 'SELECT COUNT(1) FRO TBS_DL_INFRA_270924_PRE2' INTO Q ; 140 S:=P+Q; 141 DBS_OUTPUT.PUT_LINE('No Of Records That Available in SELECT STATEENT = ' || TO_CHAR(S)); 142 V_SELECT_COUNT := S; 143 144 update custom.c_fdst set TRAN_PROCESS_STATUS='E',error_reason='INFRA_270924| Failed due to Double lien' where system_id='TBS' and BATCH_TRAN_ID in ( 145 '1537767678', 146 '1537892824', 147 '1537884082', 148 '1537767616', 149 '1537698697', 150 '1537780815', 151 '1537884053', 152 '1537871574', 153 '1537867085', 154 '1537737082', 155 '1537853986', 156 '1537867129', 157 '1537698726', 158 '1537853229', 159 '1537892791', 160 '1537853259', 161 '1537737187', 162 '1537780846', 163 '1537853959', 164 '1537871605', 165 '1537674427', 166 '1537674407', 167 '1537630760', 168 '1537630790', 169 '1537613509', 170 '1537613540', 171 '1535277457', 172 '1535043576', 173 '1534021404', 174 '1535308964', 175 '1535247595', 176 '1535021222', 177 '1535442804', 178 '1535467976', 179 '1535855763', 180 '1533835923', 181 '1534972136', 182 '1535278904', 183 '1535879834', 184 '1535566822', 185 '1536122584', 186 '1536758811', 187 '1536122592', 188 '1537315761', 189 '1537053134', 190 '1537143954', 191 '1537126583', 192 '1536948264', 193 '1536956356', 194 '1537593062', 195 '1536989204', 196 '1537046181', 197 '1536950204', 198 '1536908797', 199 '1536873144', 200 '1536859397') and tran_PROCESS_STATUS is null ; 201 I := I + SQL%ROWCOUNT; 202 203 update custom.c_fhst set PROCESS_STATUS='E' ,FINACLE_PROCESS_STATUS='C' ,PROCESS_REARK ='INFRA_270924| Failed due to Double lien' where system_id='TBS' and BATCH_TRAN_ID in ( 204 '1537767678', 205 '1537892824', 206 '1537884082', 207 '1537767616', 208 '1537698697', 209 '1537780815', 210 '1537884053', 211 '1537871574', 212 '1537867085', 213 '1537737082', 214 '1537853986', 215 '1537867129', 216 '1537698726', 217 '1537853229', 218 '1537892791', 219 '1537853259', 220 '1537737187', 221 '1537780846', 222 '1537853959', 223 '1537871605', 224 '1537674427', 225 '1537674407', 226 '1537630760', 227 '1537630790', 228 '1537613509', 229 '1537613540', 230 '1535277457', 231 '1535043576', 232 '1534021404', 233 '1535308964', 234 '1535247595', 235 '1535021222', 236 '1535442804', 237 '1535467976', 238 '1535855763', 239 '1533835923', 240 '1534972136', 241 '1535278904', 242 '1535879834', 243 '1535566822', 244 '1536122584', 245 '1536758811', 246 '1536122592', 247 '1537315761', 248 '1537053134', 249 '1537143954', 250 '1537126583', 251 '1536948264', 252 '1536956356', 253 '1537593062', 254 '1536989204', 255 '1537046181', 256 '1536950204', 257 '1536908797', 258 '1536873144', 259 '1536859397') and PROCESS_STATUS='N' and FINACLE_PROCESS_STATUS='N'; 260 I := I + SQL%ROWCOUNT; 261 262 263 DBS_OUTPUT.PUT_LINE('Actual No Of Records Affected = ' || TO_CHAR(I)); 264 V_ACTUAL_RECORDS_TO_FIX_COUNT := I; 265 266 IF((V_EXPECTED_RECORDS_TO_FIX_COUNT = V_SELECT_COUNT) AND (V_EXPECTED_RECORDS_TO_FIX_COUNT = V_ACTUAL_RECORDS_TO_FIX_COUNT )) THEN 267 DBS_OUTPUT.PUT_LINE('NO OF RECORDS COITTED = ' || V_ACTUAL_RECORDS_TO_FIX_COUNT ); 268 COIT; 269 270 BEGIN 271 EXECUTE IEDIATE 'CREATE TABLE TBS_DL_INFRA_270924_POST1 AS (SELECT C.*, ROWID ROW_ID FRO custom.c_fdst C WHERE ROWID IN (SELECT ROW_ID FRO TBS_DL_INFRA_270924_PRE1))'; 272 273 EXECUTE IEDIATE 'CREATE TABLE TBS_DL_INFRA_270924_POST2 AS (SELECT C.*, ROWID ROW_ID FRO custom.c_fhst C WHERE ROWID IN (SELECT ROW_ID FRO TBS_DL_INFRA_270924_PRE2))'; 274 275 EXECUTE IEDIATE 'GRANT SELECT ON TBS_DL_INFRA_270924_POST1 TO SUPPORT' ; 276 EXECUTE IEDIATE 'GRANT SELECT ON TBS_DL_INFRA_270924_POST2 TO SUPPORT' ; 277 278 EXECUTE IEDIATE 'SELECT COUNT(1) FRO TBS_DL_INFRA_270924_POST1' INTO W; 279 EXECUTE IEDIATE 'SELECT COUNT(1) FRO TBS_DL_INFRA_270924_POST2' INTO X; 280 U:=W+X; 281 282 DBS_OUTPUT.PUT_LINE('No Of Records That Available in SELECT STATEENT POST COIT = ' || TO_CHAR(U)); 283 V_SELECT_COUNT_POST_COIT := U; 284 285 END; 286 287 ELSE 288 DBS_OUTPUT.PUT_LINE('NO OF RECORDS ROLLBACK = ' || TO_CHAR(I)); 289 ROLLBACK; 290 END IF; 291 292 END; 293 / Procedure created. 
3012,Finacle-Datapatch,2024-10-01,Finacle-Datapatch,Some Static Content!!!,[CHG0095653],Not Applicable,SQL> DEF; DEFINE _DATE = "02-OCT-24" (CHAR) DEFINE _CONNECT_IDENTIFIER = "//10.10.38.21:1530/findb" (CHAR) DEFINE _USER = "DPATCH" (CHAR) DEFINE _PRIVILEGE = "" (CHAR) DEFINE _SQLPLUS_RELEASE = "1903000000" (CHAR) DEFINE _EDITOR = "Notepad" (CHAR) DEFINE _O_VERSION = "Oracle Database 19c Enterprise Edition Release 19.0.0.0.0 - Production Version 19.20.0.0.0" (CHAR) DEFINE _O_RELEASE = "1920000000" (CHAR) DEFINE X = "2024102_011615_A" (CHAR)
3012,Finacle-Datapatch,2024-10-01,Finacle-Datapatch,Some Static Content!!!,[CHG0095653],Not Applicable,SQL> GRANT SELECT ON TBS_DL_INFRA_270924_PRE1 TO SUPPORT; Grant succeeded. 
3012,Finacle-Datapatch,2024-10-01,Finacle-Datapatch,Some Static Content!!!,[CHG0095653],Not Applicable,SQL> EXEC TBS_DL_INFRA_270924(); No Of Records That Should Be Affected = 168 No Of Records That Available in SELECT STATEENT = 168 Actual No Of Records Affected = 168 NO OF RECORDS COITTED = 168 No Of Records That Available in SELECT STATEENT POST COIT = 168 PL/SQL procedure successfully completed. 
3012,Finacle-Datapatch,2024-10-01,Finacle-Datapatch,Some Static Content!!!,[CHG0095653],Not Applicable,SQL> select 'Pre Deployment Invalid objects for user : ' ||sys_context( 'userenv', 'current_schema' ) from dual; SQL> select 'Pre Deployment Invalid objects for user : ' ||sys_context( 'userenv', 'current_schema' ) from dual; SQL> select object_name,object_type from user_objects where status='INVALID' ; SQL> select object_name,object_type from user_objects where status='INVALID' ; SQL> select 'Post Deployment Invalid objects for user : ' ||sys_context( 'userenv', 'current_schema' ) from dual; SQL> select 'Post Deployment Invalid objects for user : ' ||sys_context( 'userenv', 'current_schema' ) from dual; SQL> select object_name,object_type from user_objects where status='INVALID';
